= form_with model: [@recipe, @recipe_image], local: true do |f|
  .grid-x
    .medium-6.cell
      = render 'notifications/error_messages', object: f.object
      = f.label :image, 'Upload image'
      .small.italic
        Landscape for best results.
        %br/
        Don't leave page until upload is complete.
      = f.file_field :image, direct_upload: true,
      accept: 'image/png,image/gif,image/jpeg'
      %p
        %ul.menu
          %li.pad-right= f.submit 'Upload Image', class: 'button'
          %li= link_to 'Finished Editing', @recipe, class: 'button secondary'

    - if @recipe.recipe_images
      - @recipe.recipe_images.each do |recipe_image|
        - if recipe_image.image.attached?
          .medium-3.cell
            = link_to recipe_image.user do
              %b uploaded by:
              = recipe_image.user.username
            .thumbnail
              %p= image_tag medium_image(recipe_image.image)
              - if is_author?(@recipe.user) || is_author?(recipe_image.user)
                %br/
                = link_to 'Remove Image', [@recipe, recipe_image],
                class: 'alert button tiny', method: :delete,
                data: { confirm: 'Are you sure?' }
